$$WPUtil.guaranteeExistence($$WP,"Handlebars");$$WPUtil.guaranteeExistence($$WP,"Templates");$$WP.Handlebars.addHelpers=function addHelpers(){var d="Core.Banner",c="boolean",b="UI.InfoBubble",f=null,e=false,a=true;if($$WP.Utilities){$$WP.Handlebars.addComponent=function addComponent(c){var a="componentcontainer_"+$$WPUtil.generateGUID(),b=function(){var d=document.getElementById(a);$$WP.Utilities.addComponent._Counter[a]++;if(!d){$$WP.Utilities.addComponent._Counter[a]<10&&window.setTimeout(b,1);return}delete $$WPUtil.Handlebars.addComponent._Counter[a];$afe.jq(d).safeAppend(c.$container)};$$WP.Utilities.addComponent._Counter[a]=0;window.setTimeout(b,1);return'<div id="'+a+'"></div>'};$$WP.Handlebars.addComponent._Counter={};Handlebars.registerHelper("addComponent",$$WP.Handlebars.addComponent);if($$WP.Utilities.UI){Handlebars.registerHelper("ifMobile",function(a){return $$WP.Utilities.UI.IsMobile?a.fn(this):a.inverse(this)});Handlebars.registerHelper("ifNotMobile",function(a){return!$$WP.Utilities.UI.IsMobile?a.fn(this):a.inverse(this)});Handlebars.registerHelper("ifWelcome",function(a){return $$WP.ApplicationContext===78?a.fn(this):a.inverse(this)});Handlebars.registerHelper("ifWelcomeNotMobile",function(a){return $$WP.ApplicationContext===78&&!$$WP.Utilities.UI.IsMobile?a.fn(this):a.inverse(this)});Handlebars.registerHelper("ifWelcomeOrMobile",function(a){return $$WP.ApplicationContext===78||$$WP.Utilities.UI.IsMobile?a.fn(this):a.inverse(this)});Handlebars.registerHelper("ifNotWelcomeOrMobile",function(a){return $$WP.ApplicationContext!==78&&!$$WP.Utilities.UI.IsMobile?a.fn(this):a.inverse(this)});Handlebars.registerHelper("ifPreLogin",function(a){return!$$WP.Utilities.UI.IsLoggedIn?a.fn(this):a.inverse(this)});Handlebars.registerHelper("ifiOS",function(a){return WP.DOM.Browser.isIPhone||WP.DOM.Browser.isIPad||WP.DOM.Browser.isIPod||$$WP.ApplicationContext===78&&$$WP.Utilities.UI.IsIos()?a.fn(this):a.inverse(this)});Handlebars.registerHelper("proxyColorClass",function(){return $$WP.Utilities.UI.ProxyColorClass});Handlebars.registerHelper("ifGuestLoggedIn",function(a){return $$WP.Utilities.UI.GuestLoggedIn?a.fn(this):a.inverse(this)})}}if($$WP.Strings){Handlebars.registerHelper("setStringNamespace",$$WP.Strings.setDefaultNamespace);Handlebars.registerHelper("clearStringNamespace",$$WP.Strings.clearDefaultNamespace);Handlebars.registerHelper("getStringResource",$$WP.Strings.getForTemplate);Handlebars.registerHelper("getDisplayString",function(b,c,a){if(typeof a==="string"){if(a)return $$WP.Strings.getForTemplate(b+"_"+a,c)}else if(typeof a==="number")return $$WP.Strings.getForTemplate(b+"_"+a.toString(),c);return $$WP.Strings.getForTemplate(b,c)});Handlebars.registerHelper("getDisplayStringWithMnemonics",function(f,d){var c="@MYCHART@",a,b,e;if($.isFunction(d))a=d();else a=d;for(b in a)$$WP.Strings.addMnemonic(c+b.toUpperCase()+"@",a[b].Value,a[b].IsLink,a[b].Namespace,a[b].EncodingType);e=$$WP.Strings.getForTemplate(f);for(b in a)$$WP.Strings.removeMnemonic(c+b.toUpperCase()+"@",a[b].Namespace);return e});Handlebars.registerHelper("addStringResourceMnemonic",$$WP.Strings.addMnemonic);Handlebars.registerHelper("addLinkMnemonic",function(g,d,b,h,i){b=$$WP.Strings.getNamespace().replaceMnemonics(b);var c='<a data-id="redirect" href="'+b+'" data-redirect="'+b+'" data-organization="'+h;if(i===a)c+='" target="_blank';$$WP.Strings.addMnemonic(g,c+'">'+$$WP.Strings.get(d)+"</a>",e,f,$$WP.Strings.EncodingTypes.None)});Handlebars.registerHelper("setOrganization",$$WP.Strings.setOrganization);Handlebars.registerHelper("clearOrganization",$$WP.Strings.clearOrganization);Handlebars.registerHelper("removeStringResourceMnemonic",$$WP.Strings.removeMnemonic)}try{if(makeLink){Handlebars.registerHelper("makeLink",makeLink);Handlebars.registerHelper("makeStaticLink",makeStaticLink);Handlebars.registerHelper("makeStaticImageLink",makeStaticImageLink);Handlebars.registerHelper("showFile",function(a){return makeLink("showfile.asp?key="+a)})}}catch(g){}try{if(isDataTile){Handlebars.registerHelper("ifDataTiles",function(a){return isDataTile()?a.fn(this):a.inverse(this)});Handlebars.registerHelper("ifNotDataTiles",function(a){return!isDataTile()?a.fn(this):a.inverse(this)})}}catch(g){}$$WP.CommunityUtilities&&Handlebars.registerHelper("canShowExternalLoadingIndicator",function(a){return $$WP.CommunityUtilities.hasCommunityLinks()?a.fn(this):a.inverse(this)});if($$WP.FormValidation){Handlebars.registerHelper("validationSettingsAttribute",$$WP.FormValidation.Handlebars.validationSettingsAttribute);Handlebars.registerHelper("messageDisplay",$$WP.FormValidation.Handlebars.messageDisplay);Handlebars.registerHelper("messageDisplayForAttribute",$$WP.FormValidation.Handlebars.messageDisplayForAttribute);Handlebars.registerHelper("disableIfInvalidAttribute",$$WP.FormValidation.Handlebars.disableIfInvalidAttribute);Handlebars.registerHelper("validationGroupAttribute",$$WP.FormValidation.Handlebars.validationGroupAttribute);Handlebars.registerHelper("validationRequiredAttribute",$$WP.FormValidation.Handlebars.validationRequiredAttribute)}$$WP.Currency&&Handlebars.registerHelper("numberAsCurrency",function(a,c){var b;if($.isFunction(a))b=a();else b=a;return $$WP.Currency.Helpers.numberToCurrency(b,c)});if($$WP.I18N){Handlebars.registerHelper("verticalDateWithYear",function(f,b,d){var c=new Date(d,b-1,f),a=$$WP.I18N.getOrderedDatePieces(e);return new Handlebars.SafeString($$WP.I18N.Handlebars.verticalDate(c,a))});Handlebars.registerHelper("verticalDateWithDayName",function(f,c,e){var d=new Date(e,c-1,f),b=$$WP.I18N.getOrderedDatePieces(a);if(b[0]==="d")b.unshift("dow");else b.push("dow");return new Handlebars.SafeString($$WP.I18N.Handlebars.verticalDate(d,b))});Handlebars.registerHelper("verticalDateWithoutDay",function(g,c,f){var d=new Date(f,c-1,g),b=$$WP.I18N.getOrderedDatePieces(e,e,a);return new Handlebars.SafeString($$WP.I18N.Handlebars.verticalDate(d,b))})}if($$WP.UI)if($$WP.UI.InfoBubble){Handlebars.registerHelper("infoBubble",function(e,f,d){return Handlebars.helpers.addTemplate(b,new $$WP.UI.InfoBubble({BubbleTitle:e,BubbleText:f,DisableHtmlEncoding:typeof d===c&&d===a,Image:"images/info.png"}))});Handlebars.registerHelper("customInfoBubble",function(e,f,g,d){return Handlebars.helpers.addTemplate(b,new $$WP.UI.InfoBubble({BubbleTitle:f,BubbleText:g,DisableHtmlEncoding:typeof d===c&&d===a,Image:e}))});Handlebars.registerHelper("simpleInfoBubble",function(e,d){return Handlebars.helpers.addTemplate(b,$$WP.UI.InfoBubble.SimpleInfoBubble(e,typeof d===c&&d===a))});Handlebars.registerHelper("textInfoBubble",function(e,f,g,d){return Handlebars.helpers.addTemplate(b,new $$WP.UI.InfoBubble({AnchorText:e,BubbleTitle:f,BubbleText:g,DisableHtmlEncoding:typeof d===c&&d===a}))});Handlebars.registerHelper("simpleTextInfoBubble",function(e,f,d){return Handlebars.helpers.addTemplate(b,$$WP.UI.InfoBubble.SimpleTextInfoBubble(e,f,typeof d===c&&d===a))})}Handlebars.registerHelper("coreBanner",function(a){return Handlebars.helpers.addTemplate(d,a)});Handlebars.registerHelper("informationalBanner",function(b,a){return Handlebars.helpers.addTemplate(d,{BannerType:"informationalType",HeaderText:b,DetailText:a})});Handlebars.registerHelper("successBanner",function(b,a){return Handlebars.helpers.addTemplate(d,{BannerType:"successType",HeaderText:b,DetailText:a})});Handlebars.registerHelper("warningBanner",function(b,a){return Handlebars.helpers.addTemplate(d,{BannerType:"warningType",HeaderText:b,DetailText:a})});Handlebars.registerHelper("criticalBanner",function(b,a){return Handlebars.helpers.addTemplate(d,{BannerType:"criticalType",HeaderText:b,DetailText:a})});Handlebars.registerHelper("ajaxSpinner",function(b,a){return Handlebars.helpers.addTemplate("UI.AjaxSpinner",{inline:b,loadingMessage:a})});$$WP.Svg&&Handlebars.registerHelper("referenceSvg",function(a){if(a===f||a==="")return f;var c=document.createElement("use"),b;if(a.indexOf("~/")===0)b=makeLink(a.substring(2));else if(a.indexOf("http")===0)b=a;else b=makeStaticImageLink(a);c.setAttribute("xlink:href",b);if(WP.DOM.Browser.isIE){$$WP.Svg.Helpers.loadSingleSvgIcon(c);return new Handlebars.SafeString(c.innerHTML)}return new Handlebars.SafeString(c.outerHTML)});Handlebars.registerHelper("URLEncode",encodeURI);Handlebars.registerHelper("encodeURIComponent",encodeURIComponent);Handlebars.registerHelper("ifEquals",function(b,c,a){return b!==c?a.inverse(this):a.fn(this)});Handlebars.registerHelper("ifNotEquals",function(b,c,a){return b===c?a.inverse(this):a.fn(this)});Handlebars.registerHelper("addTemplate",function(d,f,c,g){for(var e=d.split("."),h=e.length,a=$$WP.Templates,b=0;b<h;b++)a=a[e[b]];if(typeof a!=="function")throw"addTemplate could not find $$WP.Templates."+d;if(c&&g)f.AdditionalData=c;return new Handlebars.SafeString(a(f))});Handlebars.registerHelper("writeLink",function(b,a){return'<a href="'+b+'" onclick="$$WPUtil.TryRedirect(this.href); return false">'+a+"</a>"});Handlebars.registerHelper("ifLt",function(b,c,a){return b<c?a.fn(this):a.inverse(this)});Handlebars.registerHelper("ifGt",function(b,c,a){return b>c?a.fn(this):a.inverse(this)});Handlebars.registerHelper("isLastInArray",function(c,b,a){return c+1===b?a.fn(this):a.inverse(this)});Handlebars.registerHelper("isMiddleInArray",function(c,b,a){return c+1===Math.ceil(b/2)?a.fn(this):a.inverse(this)});Handlebars.registerHelper("each-reverse",function(c,d){var a,b="";if(c&&c.length>0)for(a=c.length-1;a>=0;a--){d.data.index=a;b=b+d.fn(c[a])}else b=d.inverse(this);return b});Handlebars.registerHelper("raw",function(a){return new Handlebars.SafeString(a)});Handlebars.registerHelper("ifEven",function(b,a){return b%2===0?a.fn(this):a.inverse(this)});Handlebars.registerHelper("ifAny",function(){for(var a=arguments.length-1,b=0;b<a;b++)if(arguments[b])return arguments[a].fn(this);return arguments[a].inverse(this)});Handlebars.registerHelper("ifAll",function(){for(var a=arguments.length-1,b=0;b<a;b++)if(!arguments[b])return arguments[a].inverse(this);return arguments[a].fn(this)});Handlebars.registerHelper("ifNone",function(){for(var a=arguments.length-1,b=0;b<a;b++)if(arguments[b])return arguments[a].inverse(this);return arguments[a].fn(this)});Handlebars.registerHelper("addition",function(a,b){a=Number(a)||0;b=Number(b)||0;return a+b});Handlebars.registerHelper("concat",function(a,b){a=String(a)||"";b=String(b)||"";return a+b});Handlebars.registerHelper("join",function(a,b){return a&&a.join?a.join(b):f});Handlebars.registerHelper("ifIn",function(c,b,a){return Object.prototype.toString.call(b)==="[object Array]"&&b.indexOf(c)>-1?a.fn(this):a.inverse(this)});Handlebars.registerHelper("breakLines",function(a){a=Handlebars.Utils.escapeExpression(a);a=a.replace(/(\r\n|\n|\r)/gm,"<br>");return new Handlebars.SafeString(a)});Handlebars.registerHelper("repeat",function(d,e){for(var a="",c={},b=1;b<=d;b++){c.index=b;a=a+e.fn(this,{data:c})}return a});Handlebars.registerHelper("ifArray",function(b,a){return Array.isArray(b)?a.fn(this):a.inverse(this)});Handlebars.registerHelper("highlightString",function(e,a){var d=document.createElement("span"),c,f;if(a.length>0){d.appendChild(document.createTextNode(e.substring(0,a[0].start)));for(var b=0;b<a.length;b++){c=document.createElement("span");c.className="hilite";c.innerText=e.substring(a[b].start,a[b].end);d.appendChild(c);f=b<a.length-1?a[b+1].start:e.length;d.appendChild(document.createTextNode(e.substring(a[b].end,f)))}}return new Handlebars.SafeString(d.innerHTML)})};$afe.onDocumentReady($$WP.Handlebars.addHelpers)