$$WPComp.ThirdPartyVerification=function(a){this.Components$Component(a);if(!a.showExplanation){$afe.select("#Signup_thirdparty").find(".pretext").addClass("hidden");$afe.select("#pretextThirdPartyExplanation").addClass("hidden")}};$$WPComp.ThirdPartyVerification.prototype={_sessionID:null,_jsc:null,_hdim:null,DoInquiry:function Epic$PatientAccess$Components$ThirdPartyVerification$DoInquiry(b,a,c,f,g,e){var d;d=makeLink("ThirdPartyVerification/Inquiry/GetInitialVerification");a=a+"&verificationToken="+encodeURIComponent(c._verificationToken);$.post(d,a,function returnInquiry(a){b._sessionID=a.SessionID;b.HandleValidationResult(a,b,c,f,g,e)})},SetupQuestionForm:function Epic$PatientAccess$Components$ThirdPartyVerification$SetupQuestionForm(g,d,l,j,k,i){var c="hidden",a="disabled",b="href",e=".button",f,h;d.find(e).removeAttr(b);$$WPUtil.SetupRadioLabelsInContainer(d,function selectAnswer(c){$afe.jq(c).parent().find(e).removeClass(a).safeAttr(b,"#1")});d.find(".questionContainer:first").removeClass(c);f=d.find(e);f.click(function clickNext(f){var e=this,d;if($afe.jq(e).hasClass(a))return false;f.preventDefault();$afe.jq(e).removeAttr(b);$afe.jq(e).addClass(a);d=$afe.jq(e).parent().parent();if(d.next().length>0){d.addClass(c);d.next().removeClass(c)}else g.SubmitKBAAnswers(g,l,j,k,i);return false});h=f.html();dangerou$.setHtml(f,h.replace("__Next__",$afe.select("#thirdparty_nextLabel").html()))},SubmitKBAAnswers:function Epic$PatientAccess$Components$ThirdPartyVerification$SubmitKBAAnswers(b,d,g,h,f){var a,e,c;c=[];b.$container.find(".questionContainer").each(function processAnswer(){var b,d,a;b=$afe.jq(this).find('input[name="questionRelativeOrder"]').val();d=$afe.jq(this).find('input[type="radio"]:checked').val();a={};a.RelativeOrder=b;a.Selection=(parseInt(d,10)+1).toString();c.push(a)});a={};a.KBAanswers=c;a.SessionID=b._sessionID;a.JSC=b._jsc;a.HDIM=b._hdim;a.VerificationToken=d._verificationToken;e=makeLink("ThirdPartyVerification/Inquiry/SubmitKBAAnswers");$.ajax({url:e,type:"POST",dataType:"json",data:"KBAAnswersJson="+encodeURIComponent(JSON.stringify(a)),success:function afterKBA(c){var a;b.HandleValidationResult(c,b,d,g,h,f);a=$afe.select("#thirdparty_questions");a[0].reset();a.find(".selected").removeClass("selected")}})},HandleValidationResult:function Epic$PatientAccess$Components$ThirdPartyVerification$HandleValidationResult(b,h,a,g,c,f){var e,d;if(b===null)c(a,"System");else if(!b.HasError)if(b.Questions===null)if(b.IsVerificationPassed)g(a);else c(a,"Verification");else{e=$afe.renderTemplate($$WP.Templates.ThirdPartyVerification.ThirdPartyQuestionForm,b);d=$afe.select("#ThirdpartyQuestion_Container");d.empty().safeAppend(e);h.SetupQuestionForm(h,d,a,g,c,f);f(a);$$WPUtil.HideAjaxSpinner($afe.select(".ajaxspinner"))}else c(a,"System")}};$$WPComp.ThirdPartyVerification.extend("Components.Component")