(function WP$BillPay$GuestPayWorkflowController$definition(){var a=function WP$BillPay$GuestPayWorkflowController(b,c){var a=this;a.proxify("render");a.WP$UI$SubwayWorkflowController(b);a._dataPool=c;a.AllowBackNavWhenInvalid=true;$afe.jq(document.body).on("click scroll keydown",$.proxy(a._resetTimer,a));a.addStop(new $$WP.BillPay.GuestPayFirstStepController(b,a._dataPool));a.addStop(new $$WP.Payments.PaymentMethodEntryStepController(b,a._dataPool));a.addStop(new $$WP.BillPay.GuestPayVerifyStepController(b,a._dataPool))},b={_dataPool:null,_idleTimer:null,_idleSeconds:300,_handleAjaxResponse:function WP$BillPay$GuestPayWorkflowController$_handleAjaxResponse(a){$$WPUtil.TryRedirect(makeLink("Payments/PaymentMethod/ShowPaymentResult?workflow="+encodeURIComponent(this._dataPool.PaymentPostingDataModel.PaymentWorkflow)+"&id="+encodeURIComponent(a.Id)))},_hasNoData:function WP$BillPay$GuestPayWorkflowController$_hasNoData(){return this._dataPool.PaymentWorkflowModel===null},_submitFunction:function WP$BillPay$GuestPayWorkflowController$_submitFunction(){var a="disabled",b=this,d=$.proxy(b._handleAjaxResponse,b),c=b.$root.find(".formbuttons").children();c.addClass(a);c.prop(a,true);$afe.select("#guestPayVerifyStep>.pmtLoadingOverlay").removeClass("hidden");$$WPUtil.ShowAjaxSpinner($afe.select("#guestPayVerifyStep .ajaxspinner"));WP.Events.cancelBeforeUnload();$.ajax({url:makeLink("Billing/GuestPay/ProcessPayment"),data:$$WPUtil.postify(b._dataPool.PaymentPostingDataModel),type:"POST",dataType:"json",error:d,success:d})},_cancelFunction:function WP$BillPay$GuestPayWorkflowController$_cancelFunction(){WP.Events.cancelBeforeUnload();$$WPUtil.TryRedirect(makeLink("Billing/GuestPay/PayAsGuest"))},render:function WP$BillPay$GuestPayWorkflowController$render(){this.WP$UI$SubwayWorkflowController$render();$afe.select(".subway").addClass("hidden");$afe.select(".ajaxspinner").hide();$$WP.Billing.Helpers.adjustWorkflowUiForBilling(this.$root)},_resetTimer:function WP$BillPay$GuestPayWorkflowController$_resetTimer(){var a=this;clearTimeout(a._idleTimer);a._idleTimer=setTimeout($.proxy(a._clearPage,a),a._idleSeconds*1e3)},_clearPage:function WP$BillPay$GuestPayWorkflowController$_clearPage(){WP.Events.cancelBeforeUnload();window.location=makeLink("Billing/GuestPay/PayAsGuest?cleared=1")}};a.prototype=b;$$WP.BillPay=$$WP.BillPay||{};$$WP.BillPay.GuestPayWorkflowController=a;a.extend($$WP.UI.SubwayWorkflowController,"WP$BillPay$GuestPayWorkflowController")})();$$WP.Debug.UnitTest=$$WP.Debug.UnitTest||{};$$WP.Debug.UnitTest.tests=$$WP.Debug.UnitTest.tests||[];$$WP.Debug.UnitTest.tests.push(function UnitTests$GuestPayWorkflowController(){var a;a=$$WP.Debug.UnitTest.assert})