$$WPComp.DemographicsForm=function Epic$PatientAccess$Components$DemographicsForm(i){var g="matchColumnHeights",c='"]',b='[data-message-display-for="',e="invalid",d="hidden",p="AddressInfo",o="#addressSection",l="DemographicsForm",a=this,j,s,h,m,r,q,f;if(i.containerName)a.$demogContainer=$afe.select(i.containerName);else a.$demogContainer=$afe.select("#Demographic_Container");a.Components$Component(i);a.demographicsStrings=$$WP.Strings.getNamespace(l);f=a;if($afe.select(o).length>0){a._addressRequired=$afe.select(o).safeAttr("data-required")==="1";a._addressComponent=new $$WPComp.AddressForm({prefix:p,addrRequired:a._addressRequired})}$$WPUtil.SetupRadioLabels();h=$afe.select(".infoBubbleWrapper");if(h!==null)for(j=0;j<h.length;j++){m=h.get(j);r=m.getAttribute("id");q=m.innerHTML;h.removeClass(d);s=new $$WP.UI.InfoBubble($$WP.UI.InfoBubble.SimpleInfoBubble(HTMLUnencode(q),true));$afe.select("#"+r).empty().safeAppend($afe.renderTemplate($$WP.Templates.UI.InfoBubble,s))}a.$demogContainer.keyup(f,function checkInput(a){var f;f=a.target;if(a.keyCode===9)return;if(f.tagName.toLowerCase()!=="input")return;!a.target.classList.contains(e)&&$afe.select(b+a.target.id+c).addClass(d)});a.$demogContainer.find(".selector").change("",function(a){var e;e=a.target.parentElement.getAttribute("data-name");$afe.select(b+a.target.id+c).addClass(d)});$afe.select("select").blur("",function(a){if(a.target.classList.contains(e)){$afe.select(b+a.target.id+c).removeClass(d);$afe.jq(window).trigger(g)}});$afe.select("input").blur("",function hideHint(a){var h;(f.stripProxyNameAndCompare(a.target.id,"EmailVerification")||f.stripProxyNameAndCompare(a.target.id,"Email"))&&f.checkEmailMatch(false,a.target);if(a.target.classList.contains(e)){$afe.select(b+a.target.id+c).removeClass(d);$afe.jq(window).trigger(g)}if(a.target.classList.contains("name")&&a.target.classList.contains("required"))if(a.target.value===""){h=f.$form.find(b+a.target.id+c);h.empty();h.safeAppend($$WP.SimpleTemplates.ValidationMessage($$WP.Strings.getNamespace(l).getString("NameRequiredError_"+a.target.id.replace(/Proxy/g,""))));h.safeAttr("data-invalid-reason");$afe.select(a.target.id).addClass(e);$afe.jq(window).trigger(g)}$$WP.FormValidation.checkIfFormIsValid(f.$form,true)});var k;$afe.select("#EmailVerification").bind("paste",function disablePaste(a){a.preventDefault()});k=$afe.select("#ProxyEmailVerification");k!=null&&k.bind("paste",function disablePaste(a){a.preventDefault()});var n=$afe.select("#addressSectionRoot");if(n.length===1){var t=a._addressRequired?["City","State","Street","Zip","Country"]:[];a._addressController=new $$WP.PersonalInformation.AddressController(p,null,i.addressConfig,t,true);if(a.isGuest)a._addressController.afterRender=a._addressAfterRenderWithoutAutocomplete;else a._addressController.afterRender=a._addressAfterRender;a._addressController.renderTo(n)}a.show()};Epic.PatientAccess.Components.DemographicsForm.prototype={_addressComponent:null,_addressRequired:"",_addressController:null,$demogContainer:null,IsRequiredFieldsFilled:function Epic$PatientAccess$Components$DemographicsForm$IsRequiredFieldsFilled(b){var a=true;this.$demogContainer.find(".selectContainer").each(function checkSelectFields(){if(this.getAttribute("data-required")==="1")if(!b.checkSelectFields(this))a=false});return a},stripProxyNameAndCompare:function Epic$PatientAccess$Components$DemographicsForm$stripProxyNameAndCompare(b,a){compareInputString=b.replace(/Proxy/g,"");return compareInputString===a},checkSelectFields:function Epic$PatientAccess$Components$DemographicsForm$checkSelectFields(b){var c="_Required",a,d;a=b.getAttribute("data-name");d=$afe.jq(b).find("select")[0];if(d.selectedIndex<=0){$afe.select("#"+a+c).removeClass("hidden");$afe.jq(window).trigger("matchColumnHeights");return false}$afe.select("#"+a+c).addClass("hidden");return true},checkEmailMatch:function Epic$PatientAccess$Components$DemographicsForm$checkEmailMatch(k,j){var h="data-invalid",g="data-invalid-reason",f='[data-message-display-for="',e="Verification",c,b,i,d,a;emailId=j.id.split(e)[0];verifyEmailId=emailId+e;c=$afe.select("#"+emailId);if(c){i=c.val();b=$afe.select("#"+verifyEmailId);d=b.val();if(i.toLowerCase()!==d.toLowerCase()){a=this.$form.find(f+verifyEmailId+'"]');a.empty();a.safeAppend($$WP.SimpleTemplates.ValidationMessage(this.demographicsStrings.getString("VerifyEmailNotMatchErrorMessage")));a.safeAttr(g,"");b.addClass("invalid");b.safeAttr(h,"");return false}else{a=this.$form.find(f+verifyEmailId+'"]');b.removeClass("invalid");b.removeAttr(h);a.empty();a.removeAttr(g);return true}}else return true},FormatData:function Epic$PatientAccess$Components$DemographicsForm$FormatData(b,a){if(a===null)return;$afe.select("#NationalID").val(a.NationalID);$afe.select("#WorkPhone").val(a.WorkPhone);$afe.select("#MobilePhone").val(a.MobilePhone);$afe.select("#HomePhone").val(a.HomePhone);$afe.select("#DateOfBirth").val(a.DateOfBirth);b._addressComponent&&b._addressComponent.FormatData(a.AddressInfo)},_addressAfterRenderWithoutAutocomplete:function Epic$PatientAccess$Components$DemogrpahicComponent$_addressAfterRenderWithoutAutocomplete(){var b="new-password",a="autocomplete";$$WP.FormValidation.initializeDOMSubtree($afe.select("#addressSection"));$afe.select(".grid.compact.address").removeClass("compact");$afe.select("input").safeAttr(a,b);$afe.select("textarea").safeAttr(a,b)},_addressAfterRender:function Epic$PatientAccess$Components$DemographicComponent$_addressAfterRender(){$$WP.FormValidation.initializeDOMSubtree($afe.select("#addressSection"));$afe.select(".grid.compact.address").removeClass("compact")}};$$WPComp.DemographicsForm.extend("Components.Component")